#include <SPI.h>  
#include <nRF24L01.h> 
#include <RF24.h>

#define PIN_CE  4  // Номер пина Arduino, к которому подключен вывод CE радиомодуля
#define PIN_CSN 8 // Номер пина Arduino, к которому подключен вывод CSN радиомодуля
RF24 radio(PIN_CE, PIN_CSN); // Создаём объект radio с указанием выводов CE и CSN

 radio.begin();  // Инициализация модуля
 radio.setChannel(5); // Обмен данными будет вестись на пятом канале (2,405 ГГц)
 
 radio.setDataRate (RF24_1MBPS); // Скорость обмена данными 1 Мбит/сек
   /*
    Указываем скорость передачи данных
    RF24_250KBPS = 250Кбит/сек
    RF24_1MBPS = 1Мбит/сек
    RF24_2MBPS = 2Мбит/сек
    Скорость должна быть одинакова на приёмнике и передатчике.
    При самой низкой скорости имеем самую высокую чувствительность и дальность.
  */
  
 radio.setPALevel(RF24_PA_HIGH); // Выбираем высокую мощность передатчика (-6dBm)
   /*
    Указываем мощность передатчика
    RF24_PA_MIN=-18dBm
    RF24_PA_LOW=-12dBm
    RF24_PA_HIGH=-6dBm
    RF24_PA_MAX=0dBm
  */
  
  В первую очередь в сотый раз повторяю не запитывать модули от пина ардуины 3.3
этим модулям нужен стабильный источник питания на 3,3 вольта с током 50мА для обычных модулей и 150мА для модулей с внешней антенной и усилителем.

Самый удобный и простой вариант питания модулей это взять микросхему линейного стабилизатора напряжения Ams1117 на 3,3 вольта.
При питании от пина ардуины 3.3 даже если модуль и будет работать то скорее всего криво и с глюками, также большой риск выхода из строя микросхемы USB-UART преобразователя.

ОЧЕНЬ желательно!!! припаять как можно ближе к модулю электролитический конденсатор на 10 - 50 мкф
и керамический конденсатор на 100 нф (в идеале паять прям на ноги модуля с обратной стороны)
_____________________________________________________
ПАРУ СЛОВ ПО библиотеке
строка: const uint64_t pipe = 0xF0F1F2F3F4LL - задаем адрес трубы (труба - идентификатор принимающего/передающего устройства на рабочем канале)
При построении сети из этих модулей можно использовать до шести труб.
: setAddressWidth(размер) - Указать длину используемого адреса труб в байтах
: RF24 radio(CE, CSN) - определяет к каким пинам подключены пины модуля CE и CSN
: begin() - собственно как и написано включаем модуль
: setChannel(1) - задаем один из 126ти каналов (канал = частота)
Нулевой канал соответствует частоте 2400мгц, далее по нарастающей с шагом 1 мгц
: getChannel() - Получить текущий радиочастотный канал связи
: openWritingPipe(pipe) - открываем трубу на передачу
: openReadingPipe(pipe) - открываем трубу на прием
: closeReadingPipe( № трубы ) - Закрыть трубу
: setPayloadSize(32) - Установить статичный размер буфера обмена (по дефолту 32 байта)
: getPayloadSize() - Получить текущий статичный размер блока данных в байтах
: getDynamicPayloadSize() - Получить размер блока данных в последнем принятом пакете
: enableDynamicPayloads() - Разрешить изменяемый размер блока данных для всех труб
: setAutoAck( [№ трубы ,] флаг) - Вкл/выкл пакеты подтверждения приёма данных
: setRetries(1,1) - количество попыток отправить пакет и время между попытками (!режим авто
подтверждения приема)
: setDataRate(RF24_250KBPS) - скорость обмена данными, выше скорость меньше дальность
: getDataRate() - Получить текущую скорость передачи данных по радиоканалу
: setPALevel(RF24_PA_HIGH) - определяем уровень мощности передатчика. Значения MIN, LOW, HIGH, MAX
WARNING значение PA_MAX адекватно работает далеко не на всех модулях, при использовании будьте готовы к различным глюкам.
: getPALevel() - Получить текущий уровень усиления мощности передатчика.
: startListening() - начали слушать эфир
: stopListening() - Прекратить слушать эфир и переключиться в режим передатчика.
: write(&msg, sizeof(msg)) - отправляем данные - msg это адрес переменной а sizeof(msg) вычисления длинны переменной.
: read(&msg, sizeof(msg)) - принимаем данные
: available() - прочитать и очистить буфер
: setCRCLength( размер ) - Установить размер CRC (циклически избыточный код)
: getCRCLength() - Получить текущий размер CRC (циклически избыточный код)
: disableCRC() - Отключить передачу CRC и проверку данных приёмником
: powerDown() - Перейти в режим пониженного энергопотребления
: powerUp() - Выйти из режима пониженного энергопотребления
: isPVariant() - Проверить аппаратную совместимость модуля с функциями nRF24L01
:writeFast(данные, размер, [флаг] ) - Быстро отправить данные по радиоканалу
: writeBlocking(данные, размер, время) - Быстро отправить данные с указанием таймаута
